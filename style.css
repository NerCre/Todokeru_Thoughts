/* =========================================================
   命をツナゲル - Mobile-first UI
   オフライン利用を想定したシンプルな照合アプリ
   ========================================================= */

/* Reset */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  /* Color palette tuned to a green theme to differentiate from 命をツナグ */
  --bg: #f6f9f7;
  --card: #ffffff;
  --text: #102a43;
  --muted: #52606d;
  --line: rgba(16, 42, 67, 0.12);
  --primary: #2e7d32;
  --primary-light: #66bb6a;
  --secondary: #6c757d;
  --radius: 14px;
  --shadow: 0 6px 22px rgba(0, 0, 0, 0.08);
}

html,
body {
  height: 100%;
}

body {
  font-family: system-ui, -apple-system, "Segoe UI", "Yu Gothic", "Hiragino Kaku Gothic ProN", sans-serif;
  background: var(--bg);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
}

/* Layout shells */
.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.topbar {
  position: sticky;
  top: 0;
  z-index: 5;
  background: rgba(246, 249, 247, 0.92);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid var(--line);
  padding: 10px 10px calc(10px + env(safe-area-inset-top));
  display: flex;
  align-items: center;
  gap: 10px;
}

.topbar-title {
  flex: 1;
  text-align: center;
  font-weight: 700;
  letter-spacing: 0.02em;
  color: var(--primary);
  user-select: none;
}

.icon-btn {
  border: 1px solid var(--line);
  background: #fff;
  border-radius: 999px;
  padding: 8px 10px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
  color: var(--text);
  cursor: pointer;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  font-size: 14px;
}

.icon-btn svg {
  width: 18px;
  height: 18px;
  fill: currentColor;
}

.main {
  flex: 1;
  max-width: 520px;
  margin: 0 auto;
  width: 100%;
  padding: 14px 14px calc(18px + env(safe-area-inset-bottom));
}

/* Views */
.view {
  display: none;
}

.view.active {
  display: block;
}

h1,
h2,
h3 {
  color: var(--primary);
}

h1 {
  font-size: 30px;
  font-weight: 800;
  letter-spacing: 0.03em;
  margin-bottom: 6px;
}

h2 {
  font-size: 20px;
  margin: 4px 0 14px;
  text-align: center;
}

h3 {
  font-size: 18px;
  margin: 14px 0 10px;
}

/* Hero on login */
.hero {
  text-align: center;
  padding: 16px 10px 10px;
}

.mascot img {
  width: 128px;
  height: 128px;
  margin: 8px auto 10px;
  display: block;
  filter: drop-shadow(0 6px 18px rgba(0, 0, 0, 0.12));
}

.tagline {
  font-size: 14px;
  color: var(--muted);
  line-height: 1.6;
}

/* Forms */
.login-forms {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.login-section {
  background: var(--card);
  padding: 14px;
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.input-group {
  margin-bottom: 14px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.input-group label {
  font-weight: 700;
  font-size: 14px;
  color: var(--text);
}

.input-group input,
.input-group textarea {
  padding: 10px 12px;
  border: 1px solid var(--line);
  border-radius: var(--radius);
  font-size: 16px;
  width: 100%;
  color: var(--text);
  background: var(--card);
}

.input-group textarea {
  resize: vertical;
  min-height: 80px;
}

/* Buttons */
.btn {
  width: 100%;
  border: none;
  border-radius: var(--radius);
  padding: 14px;
  font-size: 18px;
  font-weight: 700;
  cursor: pointer;
  color: #fff;
  box-shadow: var(--shadow);
  transition: transform 0.06s ease, filter 0.2s ease;
}

.btn:active {
  transform: translateY(1px) scale(0.99);
}

.btn-primary {
  background: var(--primary);
}

.btn-secondary {
  background: var(--secondary);
}

.btn[disabled] {
  opacity: 0.55;
  cursor: not-allowed;
  box-shadow: none;
}

/* Info card */
.result-card {
  background: var(--card);
  border-radius: var(--radius);
  padding: 14px;
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 14px;
}

.info-row {
  display: flex;
  justify-content: space-between;
  font-size: 16px;
  line-height: 1.4;
}

.info-row span {
  color: var(--muted);
}

.info-row strong {
  font-weight: 700;
  color: var(--primary);
}

/* Admin table */
.staff-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 14px;
}

.staff-table th,
.staff-table td {
  border-bottom: 1px solid var(--line);
  padding: 8px;
  font-size: 14px;
  text-align: left;
}

.staff-table th {
  color: var(--text);
  font-weight: 700;
}

.staff-table td button {
  margin-right: 6px;
  padding: 6px 10px;
  font-size: 13px;
  border-radius: var(--radius);
  border: none;
  cursor: pointer;
  color: #fff;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.staff-table td button.edit {
  background: var(--primary);
}

.staff-table td button.delete {
  background: var(--secondary);
}

.admin-actions {
  display: flex;
  gap: 10px;
  margin-bottom: 10px;
  flex-wrap: wrap;
}

.admin-actions .btn {
  width: auto;
  padding: 10px 16px;
  font-size: 14px;
}

/* Modal for staff edit/add */
.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.modal.hidden {
  display: none;
}

/* Utility class to hide elements */
.hidden {
  display: none !important;
}

/* Link-like button used for admin login entry */
.link-btn {
  background: none;
  border: none;
  color: var(--primary);
  text-decoration: underline;
  padding: 4px 0;
  font-size: 16px;
  cursor: pointer;
  text-align: left;
}

/* Arrange buttons vertically in result view */
.result-actions .btn {
  width: 100%;
}

.modal-content {
  background: var(--card);
  padding: 20px;
  border-radius: var(--radius);
  width: 100%;
  max-width: 420px;
  max-height: 100%;
  overflow-y: auto;
  box-shadow: var(--shadow);
}

.modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 14px;
}

/* 状態選択フィールド */
.status-fields {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 14px;
}
.status-group {
  flex: 1 1 45%;
  display: flex;
  flex-direction: column;
  gap: 4px;
}
.status-label {
  font-weight: 700;
  color: var(--text);
}
.status-options label {
  margin-right: 8px;
  font-size: 14px;
}

/* 事故種別アイコン一覧 */
.accident-icons {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 6px;
}
.accident-icons .acc-item {
  width: 64px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 8px;
  border: 1px solid var(--line);
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 20px;
  transition: background 0.2s;
}
.accident-icons .acc-item .label {
  font-size: 12px;
  margin-top: 4px;
  color: var(--text);
}
.accident-icons .acc-item.active {
  background: var(--primary-light);
  color: #fff;
}

/* 氏名検索リスト */
.name-list {
  max-height: 300px;
  overflow-y: auto;
  border: 1px solid var(--line);
  border-radius: var(--radius);
  background: var(--card);
}
.name-item {
  padding: 10px 12px;
  border-bottom: 1px solid var(--line);
  cursor: pointer;
  font-size: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.name-item:last-child {
  border-bottom: none;
}
.name-item:hover {
  background: var(--primary-light);
  color: #fff;
}

/* 選択状態の場所リストアイテム */
.name-item.selected {
  background: var(--primary-light);
  color: #fff;
}

/* Toast message */
.toast {
  position: fixed;
  left: 50%;
  bottom: 14px;
  transform: translateX(-50%);
  background: rgba(16, 42, 67, 0.92);
  color: #fff;
  padding: 10px 12px;
  border-radius: 999px;
  font-weight: 800;
  font-size: 13px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  max-width: calc(100vw - 28px);
  text-align: center;
  z-index: 1000;
}

.toast.show {
  opacity: 1;
}

/* =========================================================
   Map modal styles (yard map with polygons)
   These styles mirror the interactive map experience from
   命をツナゲル.  The yard map is drawn inside an SVG and
   overlayed polygons respond to pointer events.  Colours
   have been tuned to the green theme of 想をトドケル.
   ========================================================= */

/* SVG container */
.yard-svg {
  width: 100%;
  height: auto;
  display: block;
  user-select: none;
  touch-action: manipulation;
}

/* Area and place polygons */
.yard-svg .map-area,
.yard-svg .map-poly {
  fill: rgba(46, 125, 50, 0.10);
  stroke: rgba(255, 255, 255, 0.55);
  stroke-width: 4;
  vector-effect: non-scaling-stroke;
  cursor: pointer;
}
.yard-svg .map-area:hover,
.yard-svg .map-poly:hover {
  fill: rgba(46, 125, 50, 0.18);
}

/* Highlight selected place */
.yard-svg .map-poly.active {
  fill: rgba(255, 90, 90, 0.18);
  stroke: rgba(255, 90, 90, 0.85);
}

/* Marker dot for selected place or tap */
.yard-svg .map-dot {
  fill: rgba(255, 90, 90, 0.98);
  stroke: rgba(255, 255, 255, 0.95);
  stroke-width: 6;
  vector-effect: non-scaling-stroke;
}

/* Candidate chips/list below the map */
.map-candidates {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.map-cand {
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(16, 42, 67, 0.14);
  background: rgba(16, 42, 67, 0.06);
  font-weight: 700;
  cursor: pointer;
}
.map-cand:hover {
  background: rgba(16, 42, 67, 0.10);
}
.map-cand.primary {
  background: rgba(255, 90, 90, 0.16);
  border-color: rgba(255, 90, 90, 0.65);
}

/* Map tab buttons */
.map-tab {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(16, 42, 67, 0.14);
  background: rgba(16, 42, 67, 0.06);
  font-weight: 700;
  cursor: pointer;
  user-select: none;
}
.map-tab.active {
  background: rgba(46, 125, 50, 0.18);
  border-color: rgba(46, 125, 50, 0.55);
}